
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/interrupt-controller/irq.h>

/ {
	clocks {
		adrv9009_clkin: clock@0 {
			#clock-cells = <0>;
			compatible = "fixed-clock";
			clock-frequency = <18432000>;
			clock-output-names = "adrv9009_ext_refclk";
		};
	};
};

&fmc_spi {

	clksync0_ad9545: ad9545-lpc@0 {
			#address-cells = <1>;
			#size-cells = <0>;
			#clock-cells = <1>;
			compatible = "ad9545";
			reg = <0>;

			//spi-3wire;
			spi-max-frequency = <10000000>;

			//reset-gpios = <&gpio_daq1 3 0>;

			clock-output-names = "ad9545-1_out0", "ad9545-1_out1", "ad9545-1_out2";

/include/ "ad9545map.dtsi"

			ad9545_0_c0:channel@0 {
				reg = <0>;
				extended-name = "OUT0A";
				clock-frequency = <184320000>;
			};
			ad9545_0_c1:channel@1 {
				reg = <1>;
				extended-name = "OUT0B";
				clock-frequency = <184320000>;

			};
			ad9545_0_c2:channel@2 {
				reg = <2>;
				extended-name = "OUT0C";
				clock-frequency = <184320000>;

			};
			ad9545_0_c3:channel@3 {
				reg = <3>;
				extended-name = "OUT1A";
				clock-frequency = <184320000>;

			};
			ad9545_0_c4:channel@4 {
				reg = <4>;
				extended-name = "OUT1B";
				clock-frequency = <184320000>;

			};
	};

	trx0_adrv9009: adrv9009-phy@1 {
		#address-cells = <1>;
		#size-cells = <0>;
		#clock-cells = <1>;
		compatible = "adrv9009";

		/* SPI Setup */
		reg = <1>;
		spi-max-frequency = <10000000>;

		interrupt-parent = <&gpio0>;
		interrupts = <105 IRQ_TYPE_EDGE_RISING>;

		/* Clocks */
		/*<&axi_adrv9009_rx_jesd>, <&axi_adrv9009_tx_jesd>, <&axi_adrv9009_rx_os_jesd>,*/
		clocks = <&clksync0_ad9545 2>, <&clksync0_ad9545 2>, <&clksync0_ad9545 2>, <&clksync0_ad9545 0>, <&clksync0_ad9545 1>;
		clock-names = "jesd_rx_clk", "jesd_tx_clk", "jesd_rx_os_clk", "dev_clk", "fmc_clk";
		clock-output-names = "rx_sampl_clk", "rx_os_sampl_clk", "tx_sampl_clk";

		/* JESD204 */

		/* JESD204 RX */
		adi,jesd204-framer-a-bank-id = <1>;
		adi,jesd204-framer-a-device-id = <0>;
		adi,jesd204-framer-a-lane0-id = <0>;
		adi,jesd204-framer-a-m = <4>;
		adi,jesd204-framer-a-k = <32>;
		adi,jesd204-framer-a-f = <4>;
		adi,jesd204-framer-a-np = <16>;
		adi,jesd204-framer-a-scramble = <1>;
		adi,jesd204-framer-a-external-sysref = <1>;
		adi,jesd204-framer-a-serializer-lanes-enabled = <0x0C>;
		adi,jesd204-framer-a-serializer-lane-crossbar = <0xE4>;
		adi,jesd204-framer-a-lmfc-offset = <31>;
		adi,jesd204-framer-a-new-sysref-on-relink = <0>;
		adi,jesd204-framer-a-syncb-in-select = <0>;
		adi,jesd204-framer-a-over-sample = <0>;
		adi,jesd204-framer-a-syncb-in-lvds-mode = <1>;
		adi,jesd204-framer-a-syncb-in-lvds-pn-invert = <0>;
		adi,jesd204-framer-a-enable-manual-lane-xbar = <0>;

		/* JESD204 OBS */
		adi,jesd204-framer-b-bank-id = <0>;
		adi,jesd204-framer-b-device-id = <0>;
		adi,jesd204-framer-b-lane0-id = <0>;
		adi,jesd204-framer-b-m = <2>;
		adi,jesd204-framer-b-k = <32>;
		adi,jesd204-framer-b-f = <2>;
		adi,jesd204-framer-b-np = <16>;
		adi,jesd204-framer-b-scramble = <1>;
		adi,jesd204-framer-b-external-sysref = <1>;
		adi,jesd204-framer-b-serializer-lanes-enabled = <0x03>;
		adi,jesd204-framer-b-serializer-lane-crossbar = <0xE4>;
		adi,jesd204-framer-b-lmfc-offset = <31>;
		adi,jesd204-framer-b-new-sysref-on-relink = <0>;
		adi,jesd204-framer-b-syncb-in-select = <1>;
		adi,jesd204-framer-b-over-sample = <0>;
		adi,jesd204-framer-b-syncb-in-lvds-mode = <1>;
		adi,jesd204-framer-b-syncb-in-lvds-pn-invert = <0>;
		adi,jesd204-framer-b-enable-manual-lane-xbar = <0>;

		/* JESD204 TX */
		adi,jesd204-deframer-a-bank-id = <0>;
		adi,jesd204-deframer-a-device-id = <0>;
		adi,jesd204-deframer-a-lane0-id = <0>;
		adi,jesd204-deframer-a-m = <4>;
		adi,jesd204-deframer-a-k = <32>;
		adi,jesd204-deframer-a-scramble = <1>;
		adi,jesd204-deframer-a-external-sysref = <1>;
		adi,jesd204-deframer-a-deserializer-lanes-enabled = <0x0F>;
		adi,jesd204-deframer-a-deserializer-lane-crossbar = <0xE4>;
		adi,jesd204-deframer-a-lmfc-offset = <17>;
		adi,jesd204-deframer-a-new-sysref-on-relink = <0>;
		adi,jesd204-deframer-a-syncb-out-select = <0>;
		adi,jesd204-deframer-a-np = <16>;
		adi,jesd204-deframer-a-syncb-out-lvds-mode = <1>;
		adi,jesd204-deframer-a-syncb-out-lvds-pn-invert = <0>;
		adi,jesd204-deframer-a-syncb-out-cmos-slew-rate = <0>;
		adi,jesd204-deframer-a-syncb-out-cmos-drive-level = <0>;
		adi,jesd204-deframer-a-enable-manual-lane-xbar = <0>;

		adi,jesd204-ser-amplitude = <15>;
		adi,jesd204-ser-pre-emphasis = <1>;
		adi,jesd204-ser-invert-lane-polarity = <0>;
		adi,jesd204-des-invert-lane-polarity = <0>;
		adi,jesd204-des-eq-setting = <1>;
		adi,jesd204-sysref-lvds-mode = <1>;
		adi,jesd204-sysref-lvds-pn-invert = <0>;

		/* RX */

		adi,rx-profile-rx-fir-gain_db = <(-6)>;
		adi,rx-profile-rx-fir-num-fir-coefs = <48>;
		adi,rx-profile-rx-fir-coefs = /bits/ 16 <(2) (31) (47) (-29) (-109) (29) (220) (-6) (-394) (-59) (650) (193) (-1011) (-434) (1520) (851) (-2288) (-1720) (3215) (3063) (-5178) (-6772) (10332) (31570) (31570) (10332) (-6772) (-5178) (3063) (3215) (-1720) (-2288) (851) (1520) (-434) (-1011) (193) (650) (-59) (-394) (-6) (220) (29) (-109) (-29) (47) (31) (2)>;

		adi,rx-profile-rx-fir-decimation = <2>;
		adi,rx-profile-rx-dec5-decimation = <5>;
		adi,rx-profile-rhb1-decimation = <1>;
		adi,rx-profile-rx-output-rate_khz = <184320>;
		adi,rx-profile-rf-bandwidth_hz = <150000000>;
		adi,rx-profile-rx-bbf3d-bcorner_khz = <150000>;
		adi,rx-profile-rx-adc-profile = /bits/ 16 <227 149 181 90 1280 699 1300 59 1302 32 855 27 48 46 32 194 0 0 0 0 49 0 7 6 42 0 7 6 42 0 25 27 0 0 25 27 0 0 165 44 31 905>;
		adi,rx-profile-rx-ddc-mode = <0>;

		adi,rx-nco-shifter-band-a-input-band-width_khz = <0>;
		adi,rx-nco-shifter-band-a-input-center-freq_khz = <0>;
		adi,rx-nco-shifter-band-a-nco1-freq_khz = <0>;
		adi,rx-nco-shifter-band-a-nco2-freq_khz = <0>;
		adi,rx-nco-shifter-band-binput-band-width_khz = <0>;
		adi,rx-nco-shifter-band-binput-center-freq_khz = <0>;
		adi,rx-nco-shifter-band-bnco1-freq_khz = <0>;
		adi,rx-nco-shifter-band-bnco2-freq_khz = <0>;
        
		adi,rx-gain-control-gain-mode = <0>;
		adi,rx-gain-control-rx1-gain-index = <255>;
		adi,rx-gain-control-rx2-gain-index = <255>;
		adi,rx-gain-control-rx1-max-gain-index = <255>;
		adi,rx-gain-control-rx1-min-gain-index = <195>;
		adi,rx-gain-control-rx2-max-gain-index = <255>;
		adi,rx-gain-control-rx2-min-gain-index = <195>;

		adi,rx-settings-framer-sel = <0>;
		adi,rx-settings-rx-channels = <3>;

		/* ORX */

		adi,orx-profile-rx-fir-gain_db = <6>;
		adi,orx-profile-rx-fir-num-fir-coefs = <24>;
		adi,orx-profile-rx-fir-coefs = /bits/ 16  <(-26) (-39) (42) (-27) (-59) (59) (-123) (191) (-284) (446) (-1260) (18543) (-1260) (446) (-284) (191) (-123) (59) (-59) (-27) (42) (-39) (-26) (0)>;
		adi,orx-profile-rx-fir-decimation = <1>;
		adi,orx-profile-rx-dec5-decimation = <5>;
		adi,orx-profile-rhb1-decimation = <1>;
		adi,orx-profile-orx-output-rate_khz = <368640>;
		adi,orx-profile-rf-bandwidth_hz = <200000000>;
		adi,orx-profile-rx-bbf3d-bcorner_khz = <225000>;
		adi,orx-profile-orx-low-pass-adc-profile = /bits/ 16  <187 156 181 90 1280 1014 1425 177 1367 94 942 17 48 46 34 209 0 0 0 0 52 0 0 6 24 0 0 6 24 0 25 27 0 0 25 27 0 0 165 44 15 905>;
		adi,orx-profile-orx-band-pass-adc-profile = /bits/ 16  <120 153 181 90 1280 2485 1396 0 1107 516 1073 98 29 25 30 193 0 0 0 0 48 0 0 0 24 0 0 0 24 0 25 27 0 0 25 27 0 0 165 44 15 905>;
		adi,orx-profile-orx-ddc-mode = <0>;
		adi,orx-profile-orx-merge-filter = /bits/ 16  <(-356) (429) (43) (-763) (911) (59) (-1575) (2010) (71) (-4443) (8941) (21920)>;

		adi,orx-gain-control-gain-mode = <0>;
		adi,orx-gain-control-orx1-gain-index = <255>;
		adi,orx-gain-control-orx2-gain-index = <255>;
		adi,orx-gain-control-orx1-max-gain-index = <255>;
		adi,orx-gain-control-orx1-min-gain-index = <195>;
		adi,orx-gain-control-orx2-max-gain-index = <255>;
		adi,orx-gain-control-orx2-min-gain-index = <195>;

		adi,obs-settings-framer-sel = <1>;
		adi,obs-settings-obs-rx-channels-enable = <3>;
		adi,obs-settings-obs-rx-lo-source = <0>;

		/* TX */

		adi,tx-profile-tx-fir-gain_db = <6>;
		adi,tx-profile-tx-fir-num-fir-coefs = <20>;
		adi,tx-profile-tx-fir-coefs = /bits/ 16  <(-34) (8) (-77) (111) (-199) (351) (-671) (1527) (-3420) (20671) (-3420) (1527) (-671) (351) (-199) (111) (-77) (8) (-34) (0)>;

		adi,tx-profile-dac-div = <1>;

		adi,tx-profile-tx-fir-interpolation = <1>;
		adi,tx-profile-thb1-interpolation = <1>;
		adi,tx-profile-thb2-interpolation = <1>;
		adi,tx-profile-thb3-interpolation = <1>;
		adi,tx-profile-tx-int5-interpolation = <5>;
		adi,tx-profile-tx-input-rate_khz = <368640>;
		adi,tx-profile-primary-sig-bandwidth_hz = <150000000>;
		adi,tx-profile-rf-bandwidth_hz = <300000000>;
		adi,tx-profile-tx-dac3d-bcorner_khz = <300000>;
		adi,tx-profile-tx-bbf3d-bcorner_khz = <152000>;
		adi,tx-profile-loop-back-adc-profile = /bits/ 16 <190 163 181 90 1280 995 1507 266 1338 94 921 17 48 45 34 207 0 0 0 0 52 0 0 6 24 0 0 6 24 0 25 27 0 0 25 27 0 0 165 44 15 905>;

		adi,tx-settings-deframer-sel = <0>;
		adi,tx-settings-tx-channels = <3>;
		adi,tx-settings-tx-atten-step-size = <0>;
		adi,tx-settings-tx1-atten_md-b = <10000>;
		adi,tx-settings-tx2-atten_md-b = <10000>;
		adi,tx-settings-dis-tx-data-if-pll-unlock = <0>;

		/* Clocks */

		adi,dig-clocks-device-clock_khz = <184320>;
		adi,dig-clocks-clk-pll-vco-freq_khz = <7372800>;
		adi,dig-clocks-clk-pll-hs-div = <0>;
		adi,dig-clocks-rf-pll-use-external-lo = <0>;
		adi,dig-clocks-rf-pll-phase-sync-mode = <0>;

		/* AGC */

		//adi,rxagc-peak-agc-under-range-low-interval_ns = <205>;
		//adi,rxagc-peak-agc-under-range-mid-interval = <2>;
		//adi,rxagc-peak-agc-under-range-high-interval = <4>;
		//adi,rxagc-peak-apd-high-thresh = <39>;
		//adi,rxagc-peak-apd-low-gain-mode-high-thresh = <36>;
		//adi,rxagc-peak-apd-low-thresh = <23>;
		//adi,rxagc-peak-apd-low-gain-mode-low-thresh = <19>;
		//adi,rxagc-peak-apd-upper-thresh-peak-exceeded-cnt = <6>;
		//adi,rxagc-peak-apd-lower-thresh-peak-exceeded-cnt = <3>;
		//adi,rxagc-peak-apd-gain-step-attack = <4>;
		//adi,rxagc-peak-apd-gain-step-recovery = <2>;
		//adi,rxagc-peak-enable-hb2-overload = <1>;
		//adi,rxagc-peak-hb2-overload-duration-cnt = <1>;
		//adi,rxagc-peak-hb2-overload-thresh-cnt = <4>;
		//adi,rxagc-peak-hb2-high-thresh = <181>;
		//adi,rxagc-peak-hb2-under-range-low-thresh = <45>;
		//adi,rxagc-peak-hb2-under-range-mid-thresh = <90>;
		//adi,rxagc-peak-hb2-under-range-high-thresh = <128>;
		//adi,rxagc-peak-hb2-upper-thresh-peak-exceeded-cnt = <6>;
		//adi,rxagc-peak-hb2-lower-thresh-peak-exceeded-cnt = <3>;
		//adi,rxagc-peak-hb2-gain-step-high-recovery = <2>;
		//adi,rxagc-peak-hb2-gain-step-low-recovery = <4>;
		//adi,rxagc-peak-hb2-gain-step-mid-recovery = <8>;
		//adi,rxagc-peak-hb2-gain-step-attack = <4>;
		//adi,rxagc-peak-hb2-overload-power-mode = <1>;
		//adi,rxagc-peak-hb2-ovrg-sel = <0>;
		//adi,rxagc-peak-hb2-thresh-config = <3>;
        //
		//adi,rxagc-power-power-enable-measurement = <0>;
		//adi,rxagc-power-power-use-rfir-out = <1>;
		//adi,rxagc-power-power-use-bbdc2 = <0>;
		//adi,rxagc-power-under-range-high-power-thresh = <9>;
		//adi,rxagc-power-under-range-low-power-thresh = <2>;
		//adi,rxagc-power-under-range-high-power-gain-step-recovery = <4>;
		//adi,rxagc-power-under-range-low-power-gain-step-recovery = <4>;
		//adi,rxagc-power-power-measurement-duration = <5>;
		//adi,rxagc-power-rx1-tdd-power-meas-duration = <5>;
		//adi,rxagc-power-rx1-tdd-power-meas-delay = <1>;
		//adi,rxagc-power-rx2-tdd-power-meas-duration = <5>;
		//adi,rxagc-power-rx2-tdd-power-meas-delay = <1>;
		//adi,rxagc-power-upper0-power-thresh = <2>;
		//adi,rxagc-power-upper1-power-thresh = <0>;
		//adi,rxagc-power-power-log-shift = <0>;
        //
		//adi,rxagc-agc-peak-wait-time = <4>;
		//adi,rxagc-agc-rx1-max-gain-index = <255>;
		//adi,rxagc-agc-rx1-min-gain-index = <195>;
		//adi,rxagc-agc-rx2-max-gain-index = <255>;
		//adi,rxagc-agc-rx2-min-gain-index = <195>;
		//adi,rxagc-agc-gain-update-counter_us = <250>;
		//adi,rxagc-agc-rx1-attack-delay = <10>;
		//adi,rxagc-agc-rx2-attack-delay = <10>;
		//adi,rxagc-agc-slow-loop-settling-delay = <16>;
		//adi,rxagc-agc-low-thresh-prevent-gain = <0>;
		//adi,rxagc-agc-change-gain-if-thresh-high = <1>;
		//adi,rxagc-agc-peak-thresh-gain-control-mode = <1>;
		//adi,rxagc-agc-reset-on-rxon = <0>;
		//adi,rxagc-agc-enable-sync-pulse-for-gain-counter = <0>;
		//adi,rxagc-agc-enable-ip3-optimization-thresh = <0>;
		//adi,rxagc-ip3-over-range-thresh = <31>;
		//adi,rxagc-ip3-over-range-thresh-index = <246>;
		//adi,rxagc-ip3-peak-exceeded-cnt = <4>;
		//adi,rxagc-agc-enable-fast-recovery-loop = <0>;
        //
        //
		///* Misc */
        //
		//adi,aux-dac-enables = <0x00>; /* Mask */
        //
		//adi,aux-dac-vref0 = <3>;
		//adi,aux-dac-resolution0 = <0>;
		//adi,aux-dac-values0 = <0>;
		//adi,aux-dac-vref1 = <3>;
		//adi,aux-dac-resolution1 = <0>;
		//adi,aux-dac-values1 = <0>;
		//adi,aux-dac-vref2 = <3>;
		//adi,aux-dac-resolution2 = <0>;
		//adi,aux-dac-values2 = <0>;
		//adi,aux-dac-vref3 = <3>;
		//adi,aux-dac-resolution3 = <0>;
		//adi,aux-dac-values3 = <0>;
		//adi,aux-dac-vref4 = <3>;
		//adi,aux-dac-resolution4 = <0>;
		//adi,aux-dac-values4 = <0>;
		//adi,aux-dac-vref5 = <3>;
		//adi,aux-dac-resolution5 = <0>;
		//adi,aux-dac-values5 = <0>;
		//adi,aux-dac-vref6 = <3>;
		//adi,aux-dac-resolution6 = <0>;
		//adi,aux-dac-values6 = <0>;
		//adi,aux-dac-vref7 = <3>;
		//adi,aux-dac-resolution7 = <0>;
		//adi,aux-dac-values7 = <0>;
		//adi,aux-dac-vref8 = <3>;
		//adi,aux-dac-resolution8 = <0>;
		//adi,aux-dac-values8 = <0>;
		//adi,aux-dac-vref9 = <3>;
		//adi,aux-dac-resolution9 = <0>;
		//adi,aux-dac-values9 = <0>;
		//adi,aux-dac-vref10 = <3>;
		//adi,aux-dac-resolution10 = <0>;
		//adi,aux-dac-values10 = <0>;
		//adi,aux-dac-vref11 = <3>;
		//adi,aux-dac-resolution11 = <0>;
		//adi,aux-dac-values11 = <0>;
        //
		//adi,arm-gpio-config-orx1-tx-sel0-pin-gpio-pin-sel = <0>;
		//adi,arm-gpio-config-orx1-tx-sel0-pin-polarity = <0>;
		//adi,arm-gpio-config-orx1-tx-sel0-pin-enable = <0>;
        //
		//adi,arm-gpio-config-orx1-tx-sel1-pin-gpio-pin-sel = <0>;
		//adi,arm-gpio-config-orx1-tx-sel1-pin-polarity = <0>;
		//adi,arm-gpio-config-orx1-tx-sel1-pin-enable = <0>;
		//adi,arm-gpio-config-orx2-tx-sel0-pin-gpio-pin-sel = <0>;
		//adi,arm-gpio-config-orx2-tx-sel0-pin-polarity = <0>;
		//adi,arm-gpio-config-orx2-tx-sel0-pin-enable = <0>;
        //
		//adi,arm-gpio-config-orx2-tx-sel1-pin-gpio-pin-sel = <0>;
		//adi,arm-gpio-config-orx2-tx-sel1-pin-polarity = <0>;
		//adi,arm-gpio-config-orx2-tx-sel1-pin-enable = <0>;
		//adi,arm-gpio-config-en-tx-tracking-cals-gpio-pin-sel = <0>;
		//adi,arm-gpio-config-en-tx-tracking-cals-polarity = <0>;
		//adi,arm-gpio-config-en-tx-tracking-cals-enable = <0>;
        //
		//adi,orx-lo-cfg-disable-aux-pll-relocking = <0>;
		//adi,orx-lo-cfg-gpio-select = <19>;
        //
		//adi,fhm-config-fhm-gpio-pin = <0>;
		//adi,fhm-config-fhm-min-freq_mhz = <100>;
		//adi,fhm-config-fhm-max-freq_mhz = <100>;
        //
		//adi,fhm-mode-fhm-enable = <0>;
		//adi,fhm-mode-enable-mcs-sync = <0>;
		//adi,fhm-mode-fhm-trigger-mode = <0>;
		//adi,fhm-mode-fhm-exit-mode = <0>;
		//adi,fhm-mode-fhm-init-frequency_hz = <2450000000>;
        //
		//adi,rx1-gain-ctrl-pin-inc-step = <1>;
		//adi,rx1-gain-ctrl-pin-dec-step = <1>;
		//adi,rx1-gain-ctrl-pin-rx-gain-inc-pin = <0>;
		//adi,rx1-gain-ctrl-pin-rx-gain-dec-pin = <1>;
		//adi,rx1-gain-ctrl-pin-enable = <0>;
        //
		//adi,rx2-gain-ctrl-pin-inc-step = <1>;
		//adi,rx2-gain-ctrl-pin-dec-step = <1>;
		//adi,rx2-gain-ctrl-pin-rx-gain-inc-pin = <3>;
		//adi,rx2-gain-ctrl-pin-rx-gain-dec-pin = <4>;
		//adi,rx2-gain-ctrl-pin-enable = <0>;
        //
		//adi,tx1-atten-ctrl-pin-step-size = <0>;
		//adi,tx1-atten-ctrl-pin-tx-atten-inc-pin = <4>;
		//adi,tx1-atten-ctrl-pin-tx-atten-dec-pin = <5>;
		//adi,tx1-atten-ctrl-pin-enable = <0>;
        //
		//adi,tx2-atten-ctrl-pin-step-size = <0>;
		//adi,tx2-atten-ctrl-pin-tx-atten-inc-pin = <6>;
		//adi,tx2-atten-ctrl-pin-tx-atten-dec-pin = <7>;
		//adi,tx2-atten-ctrl-pin-enable = <0>;
        //
		//adi,tx-pa-protection-avg-duration = <3>;
		//adi,tx-pa-protection-tx-atten-step = <2>;
		//adi,tx-pa-protection-tx1-power-threshold = <128>;
		//adi,tx-pa-protection-tx2-power-threshold = <128>;
		//adi,tx-pa-protection-peak-count = <4>;
		//adi,tx-pa-protection-tx1-peak-threshold = <16>;
		//adi,tx-pa-protection-tx2-peak-threshold = <16>;
	};
};

